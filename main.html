<!-- Nofee AI â€“ ì „ì²´í™”ë©´ ìµœì í™” ë²„ì „ -->
<div id='nofee-ai-wrapper' class='ai-theme'>
  <!-- CSS ë¡œë“œ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Jacob-PO/nofee_chat@main/main.css">
  
  <!-- ëŒ€ì²´ CSS (CDN ì‹¤íŒ¨ ì‹œ) -->
  <style>
    /* ìµœì†Œí•œì˜ í´ë°± ìŠ¤íƒ€ì¼ */
    #nofee-ai-wrapper {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9999;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .nofee-chat-container {
      width: 100%;
      height: 100%;
      background: #f9faff;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    .nofee-loading {
      text-align: center;
      padding: 60px 20px;
      color: #666;
    }
  </style>

  <!-- ==========  êµ¬ì¡°  ========== -->
  <div class='nofee-chat-container'>
    <!-- í—¤ë” -->
    <div class='nofee-header'>
      <div class='nofee-header-content'>
        <div class='nofee-header-left'>
          <div class='nofee-profile-img'>
            <svg width='28' height='28' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'>
              <path d='M12 2L2 7L12 12L22 7L12 2Z'/>
              <path d='M2 17L12 22L22 17'/>
              <path d='M2 12L12 17L22 12'/>
            </svg>
          </div>
          <div class='nofee-header-text'>
            <h3>ë…¸í”¼ AI</h3>
            <p>ìµœì €ê°€ íœ´ëŒ€í° ì¶”ì²œ ì„œë¹„ìŠ¤</p>
          </div>
        </div>
        <button class='nofee-close-btn' onclick='window.NofeeAI?.minimizeChat?.() || window.close()' aria-label='ìµœì†Œí™”'>
          <svg width='20' height='20' viewBox='0 0 24 24' fill='none'>
            <path d='M19 9l-7 7-7-7' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/>
          </svg>
        </button>
      </div>
    </div>

    <!-- ë©”ì‹œì§€ ì˜ì—­ -->
    <div class='nofee-chat-wrapper'>
      <div class='nofee-chat-messages' id='nofeeChat'>
        <div class='nofee-loading' id='nofeeLoading'>
          <div class='nofee-loading-spinner'></div>
          <p>AIë¥¼ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
          <small>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</small>
        </div>
        
        <div class='nofee-intro-section' id='nofeeIntro' style='display:none'>
          <div class='nofee-intro-content'>
            <div class='nofee-intro-avatar'>
              <svg width='60' height='60' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1.5'>
                <path d='M12 2L2 7L12 12L22 7L12 2Z'/>
                <path d='M2 17L12 22L22 17'/>
                <path d='M2 12L12 17L22 12'/>
              </svg>
            </div>
            <h2>ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹</h2>
            <p>ìµœì ì˜ íœ´ëŒ€í°ì„ ì°¾ì•„ë“œë¦¬ëŠ”<br>ë…¸í”¼ AIì…ë‹ˆë‹¤</p>
            <div class='nofee-feature-pills'>
              <span class='pill'>ğŸ¯ ë§ì¶¤ ì¶”ì²œ</span>
              <span class='pill'>ğŸ’° ìˆ˜ìˆ˜ë£Œ NO</span>
              <span class='pill'>âš¡ ë¹ ë¥¸ ìƒë‹´</span>
            </div>
            <button class='nofee-start-btn' onclick='window.NofeeAI?.startConsultation?.()'>
              AI ìƒë‹´ ì‹œì‘í•˜ê¸°
            </button>
          </div>
        </div>
      </div>

      <!-- AI ìƒê°ì¤‘ (ê³ ì • ìœ„ì¹˜) -->
      <div class='nofee-ai-thinking' id='aiThinking' style='display:none'>
        <div class='nofee-thinking-content'>
          <div class='nofee-ai-dots'>
            <div class='nofee-ai-dot'></div>
            <div class='nofee-ai-dot'></div>
            <div class='nofee-ai-dot'></div>
          </div>
          <span class='nofee-ai-thinking-text'>AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</span>
        </div>
      </div>
    </div>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class='nofee-bottom-nav'>
      <a href='https://nofee.team/' class='nofee-nav-btn' target='_blank' rel='noopener'>
        <svg width='20' height='20' viewBox='0 0 24 24' fill='none'>
          <path d='M3 9L12 2L21 9V20C21 21.1 20.1 22 19 22H5C3.9 22 3 21.1 3 20V9Z' stroke='currentColor' stroke-width='2'/>
          <path d='M9 22V12H15V22' stroke='currentColor' stroke-width='2'/>
        </svg>
        <span>í™ˆ</span>
      </a>
      <a href='https://nofee.team/more' class='nofee-nav-btn' target='_blank' rel='noopener'>
        <svg width='20' height='20' viewBox='0 0 24 24' fill='none'>
          <circle cx='11' cy='11' r='8' stroke='currentColor' stroke-width='2'/>
          <path d='M21 21L16.65 16.65' stroke='currentColor' stroke-width='2' stroke-linecap='round'/>
        </svg>
        <span>ê²€ìƒ‰</span>
      </a>
      <button class='nofee-nav-btn nofee-nav-primary' onclick='window.NofeeAI?.showDeliveryInfo?.()'>
        <svg width='20' height='20' viewBox='0 0 24 24' fill='none'>
          <path d='M5 12V7C5 5.9 5.9 5 7 5H14L19 10V15H17.5' stroke='currentColor' stroke-width='2'/>
          <circle cx='7.5' cy='17.5' r='2.5' stroke='currentColor' stroke-width='2'/>
          <circle cx='16.5' cy='17.5' r='2.5' stroke='currentColor' stroke-width='2'/>
          <path d='M5 12H1' stroke='currentColor' stroke-width='2'/>
        </svg>
        <span>ë°°ì†¡ì¡°íšŒ</span>
      </button>
    </div>
  </div>

  <!-- ì›¹í”Œë¡œìš° í¼ (ì™„ì „íˆ ìˆ¨ê¹€ ì²˜ë¦¬) -->
  <form id='nofee-purchase-form' name='purchase' data-name='Purchase Form' style='position:absolute;left:-9999px;top:-9999px;visibility:hidden;'>
    <input type='hidden' name='customer_name' id='customer_name'>
    <input type='hidden' name='customer_phone' id='customer_phone'>
    <input type='hidden' name='customer_region' id='customer_region'>
    <input type='hidden' name='customer_district' id='customer_district'>
    <input type='hidden' name='privacy_consent' id='privacy_consent' value=''>
    <input type='hidden' name='phone_model' id='phone_model'>
    <input type='hidden' name='phone_carrier' id='phone_carrier'>
    <input type='hidden' name='phone_plan' id='phone_plan'>
    <input type='hidden' name='phone_price' id='phone_price'>
    <input type='hidden' name='monthly_payment' id='monthly_payment'>
    <input type='hidden' name='contract_type' id='contract_type'>
    <input type='hidden' name='activation_type' id='activation_type'>
    <input type='hidden' name='timestamp' id='timestamp'>
    <input type='hidden' name='session_id' id='session_id'>
    <input type='hidden' name='utm_source' id='utm_source'>
    <input type='hidden' name='utm_medium' id='utm_medium'>
    <input type='hidden' name='utm_campaign' id='utm_campaign'>
    <input type='submit' value='Submit' style='display:none;'>
  </form>

  <!-- ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // í¼ ì œì¶œ ë°©ì§€ (ê°œì¸ì •ë³´ ë™ì˜ ì „)
    document.getElementById('nofee-purchase-form').addEventListener('submit', function(e) {
      const consent = document.getElementById('privacy_consent').value;
      if (consent !== 'ë™ì˜í•¨') {
        e.preventDefault();
        console.log('ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
        return false;
      }
    });
    
    // ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
    function loadNofeeScript() {
      const candidates = [
        'https://cdn.jsdelivr.net/gh/Jacob-PO/nofee_chat@main/main.js',
        'https://jacob-po.github.io/nofee_chat/main.js'
      ];
      
      Promise.any(candidates.map(src => 
        new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = src + '?v=' + Date.now();
          script.onload = () => window.NofeeAI?.init ? resolve(src) : reject();
          script.onerror = reject;
          document.head.appendChild(script);
        })
      ))
      .then(() => {
        // ì´ˆê¸°í™”
        window.NofeeAI.init();
      })
      .catch(() => {
        document.getElementById('nofeeLoading').innerHTML = 
          '<p style="color:#ef4444">ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤</p>' +
          '<button onclick="location.reload()" style="margin-top:16px;padding:10px 24px;background:#4e5bff;color:white;border:none;border-radius:24px;cursor:pointer;font-weight:600">ë‹¤ì‹œ ì‹œë„</button>';
      });
    }
    
    // ìµœì†Œí™” ê¸°ëŠ¥
    window.NofeeAI = window.NofeeAI || {};
    window.NofeeAI.minimizeChat = function() {
      const wrapper = document.getElementById('nofee-ai-wrapper');
      if (wrapper) {
        wrapper.style.display = 'none';
      }
    };
    
    // ì¦‰ì‹œ ì‹¤í–‰
    loadNofeeScript();
  </script>
</div>
