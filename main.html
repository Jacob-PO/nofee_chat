<!-- λ…Έν”Ό AI μ±—λ΄‡ - Webflow Embed HTML -->
<div id="nofee-ai-wrapper">
    <!-- μΈλΌμΈ μ¤νƒ€μΌ (μ¦‰μ‹ μ μ©) -->
    <style>
        /* κΈ°λ³Έ μ¤νƒ€μΌ (CDN λ΅λ“ μ‹¤ν¨ μ‹ μµμ†ν•μ μ¤νƒ€μΌ λ³΄μ¥) */
        #nofee-ai-wrapper {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }
        .nofee-app {
            width: 100%;
            height: 800px;
            background: #ffffff;
            color: #333333;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .nofee-loading-screen {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #ffffff;
        }
    </style>
    
    <!-- λ©”μΈ μ•± μ»¨ν…μ΄λ„ -->
    <div class="nofee-app" id="nofeeApp">
        <!-- λ΅λ”© ν™”λ©΄ -->
        <div class="nofee-loading-screen" id="nofeeLoading">
            <div class="nofee-loading-content">
                <div class="nofee-logo-animation">
                    <div class="nofee-logo-circle"></div>
                    <div class="nofee-logo-pulse"></div>
                </div>
                <h1 class="nofee-loading-title">λ…Έν”Ό AI</h1>
                <p class="nofee-loading-subtitle">λ‹Ήμ‹ μ„ μ„ν• AIκ°€ μ¤€λΉ„μ¤‘μ…λ‹λ‹¤</p>
                <div class="nofee-loading-progress">
                    <div class="nofee-loading-bar"></div>
                </div>
            </div>
        </div>

        <!-- λ©”μΈ μΈν„°νμ΄μ¤ -->
        <div class="nofee-interface" id="nofeeInterface" style="display: none;">
            <!-- λ°°κ²½ ν¨κ³Ό -->
            <div class="nofee-bg-effects">
                <div class="nofee-gradient-orb nofee-orb-1"></div>
                <div class="nofee-gradient-orb nofee-orb-2"></div>
                <div class="nofee-gradient-orb nofee-orb-3"></div>
            </div>

            <!-- ν—¤λ” -->
            <header class="nofee-header">
                <div class="nofee-header-content">
                    <div class="nofee-brand">
                        <div class="nofee-brand-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <span class="nofee-brand-name">λ…Έν”Ό AI</span>
                    </div>
                    <div class="nofee-header-actions">
                        <button class="nofee-icon-btn" id="nofeeMenuBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="5" r="1" fill="currentColor"/>
                                <circle cx="12" cy="12" r="1" fill="currentColor"/>
                                <circle cx="12" cy="19" r="1" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </header>

            <!-- μ±„ν… μμ—­ -->
            <main class="nofee-main">
                <div class="nofee-chat-container" id="nofeeChat">
                    <!-- μ›°μ»΄ ν™”λ©΄ -->
                    <div class="nofee-welcome" id="nofeeWelcome">
                        <div class="nofee-welcome-content">
                            <div class="nofee-ai-avatar">
                                <div class="nofee-avatar-glow"></div>
                                <div class="nofee-avatar-core">
                                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                                        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </div>
                            <h1 class="nofee-welcome-title">μ•λ…•ν•μ„Έμ”, λ…Έν”Ό AIμ…λ‹λ‹¤</h1>
                            <p class="nofee-welcome-desc">μµμ μ ν΄λ€ν°μ„ μ°Ύμ•„λ“λ¦¬λ” AI μ–΄μ‹μ¤ν„΄νΈ</p>
                            <div class="nofee-feature-cards">
                                <div class="nofee-feature-card">
                                    <div class="nofee-feature-icon">β¨</div>
                                    <span>AI λ§μ¶¤ μ¶”μ²</span>
                                </div>
                                <div class="nofee-feature-card">
                                    <div class="nofee-feature-icon">π’°</div>
                                    <span>μμλ£ NO</span>
                                </div>
                                <div class="nofee-feature-card">
                                    <div class="nofee-feature-icon">π€</div>
                                    <span>λΉ λ¥Έ μƒλ‹΄</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- λ©”μ‹μ§€ μμ—­ -->
                    <div class="nofee-messages" id="nofeeMessages"></div>

                    <!-- AI νƒ€μ΄ν•‘ μΈλ””μΌ€μ΄ν„° -->
                    <div class="nofee-typing-indicator" id="nofeeTyping" style="display: none;">
                        <div class="nofee-typing-avatar">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="nofee-typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
            </main>

            <!-- ν•λ‹¨ μ•΅μ… λ°” -->
            <footer class="nofee-footer" id="nofeeFooter">
                <div class="nofee-quick-actions">
                    <button class="nofee-quick-btn" id="nofeeHomeBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M3 9L12 2L21 9V20C21 21.1 20.1 22 19 22H5C3.9 22 3 21.1 3 20V9Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>μ²μμΌλ΅</span>
                    </button>
                    <button class="nofee-quick-btn" id="nofeePhoneBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="5" y="2" width="14" height="20" rx="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="12" cy="18" r="1" fill="currentColor"/>
                        </svg>
                        <span>μƒν’λ³΄κΈ°</span>
                    </button>
                    <button class="nofee-quick-btn nofee-quick-primary" id="nofeeStartBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>AI μƒλ‹΄ μ‹μ‘</span>
                    </button>
                </div>
            </footer>
        </div>

        <!-- λ©”λ‰΄ μ¤λ²„λ μ΄ -->
        <div class="nofee-menu-overlay" id="nofeeMenu" style="display: none;">
            <div class="nofee-menu-content">
                <div class="nofee-menu-header">
                    <h2>λ©”λ‰΄</h2>
                    <button class="nofee-icon-btn" id="nofeeCloseMenu">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
                <nav class="nofee-menu-nav">
                    <a href="#" class="nofee-menu-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M22 12H18L15 21L9 3L6 12H2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>μ΄μμ‹κ°„</span>
                    </a>
                    <a href="#" class="nofee-menu-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>λ°°μ†΅μ •λ³΄</span>
                    </a>
                    <a href="https://nofee.team/policy" target="_blank" class="nofee-menu-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M12 8V16" stroke="currentColor" stroke-width="2"/>
                            <path d="M8 12H16" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>κ°μΈμ •λ³΄μ²λ¦¬λ°©μΉ¨</span>
                    </a>
                </nav>
            </div>
        </div>
    </div>

    <!-- Webflow μ¨κΉ€ νΌ -->
    <form id="nofee-purchase-form" name="purchase" data-name="Purchase Form" style="display: none;">
        <!-- κ³ κ° μ •λ³΄ -->
        <input type="hidden" name="customer_name" id="customer_name">
        <input type="hidden" name="customer_phone" id="customer_phone">
        <input type="hidden" name="customer_region" id="customer_region">
        <input type="hidden" name="customer_district" id="customer_district">
        <input type="hidden" name="privacy_consent" id="privacy_consent">
        
        <!-- μƒν’ μ •λ³΄ -->
        <input type="hidden" name="phone_model" id="phone_model">
        <input type="hidden" name="phone_carrier" id="phone_carrier">
        <input type="hidden" name="phone_plan" id="phone_plan">
        <input type="hidden" name="phone_price" id="phone_price">
        <input type="hidden" name="monthly_payment" id="monthly_payment">
        <input type="hidden" name="contract_type" id="contract_type">
        <input type="hidden" name="activation_type" id="activation_type">
        
        <!-- μ¶”κ°€ μ •λ³΄ -->
        <input type="hidden" name="timestamp" id="timestamp">
        <input type="hidden" name="session_id" id="session_id">
        <input type="hidden" name="utm_source" id="utm_source">
        <input type="hidden" name="utm_medium" id="utm_medium">
        <input type="hidden" name="utm_campaign" id="utm_campaign">
        
        <input type="submit" value="Submit">
    </form>

    <!-- JavaScript λ΅λ“ λ° μ΄κΈ°ν™” -->
    <script>
        // λ©”λ‰΄ ν† κΈ€
        document.getElementById('nofeeMenuBtn').onclick = function() {
            document.getElementById('nofeeMenu').style.display = 'flex';
        };
        document.getElementById('nofeeCloseMenu').onclick = function() {
            document.getElementById('nofeeMenu').style.display = 'none';
        };

        /* ========= κ²½λ΅ μ„¤μ • ========= */
        const SCRIPT_CANDIDATES = [
            'https://cdn.jsdelivr.net/gh/Jacob-PO/nofee_chat@main/main.js',
            'https://jacob-po.github.io/nofee_chat/main.js'
        ];

        /* ========= μ ν‹Έ ========= */
        function appendScript(src) {
            return new Promise((resolve, reject) => {
                const s = document.createElement('script');
                s.src = `${src}?v=${Date.now()}`;
                s.async = true;
                s.onload = () => {
                    if (window.NofeeAI?.init) {
                        resolve(src);
                    } else {
                        reject(new Error(`${src} loaded but NofeeAI missing`));
                    }
                };
                s.onerror = () => reject(new Error(`${src} λ΅λ“ μ‹¤ν¨`));
                document.head.appendChild(s);
            });
        }

        /* ========= λ©”μΈ λ΅λ” ========= */
        function loadNofeeScript() {
            Promise.any(SCRIPT_CANDIDATES.map(appendScript))
                .then((okSrc) => {
                    console.log(`β… main.js λ΅λ“ μ„±κ³µ β†’`, okSrc);
                    // λ΅λ”© μ™„λ£ ν›„ μ΄κΈ°ν™”
                    setTimeout(() => {
                        document.getElementById('nofeeLoading').style.display = 'none';
                        document.getElementById('nofeeInterface').style.display = 'flex';
                        window.NofeeAI.init();
                    }, 1500);
                })
                .catch((err) => {
                    console.error('π¨ main.jsλ¥Ό λ¶λ¬μ¬ μ μ—†μµλ‹λ‹¤:', err);
                    document.querySelector('.nofee-loading-subtitle').textContent = 'μ΄κΈ°ν™”μ— μ‹¤ν¨ν–μµλ‹λ‹¤. μƒλ΅κ³ μΉ¨ν•΄μ£Όμ„Έμ”.';
                });
        }
        
        // μ¦‰μ‹ μ‹¤ν–‰
        loadNofeeScript();
    </script>
</div>
